(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,n){e.exports=n(507)},255:function(e,t){},257:function(e,t){},273:function(e,t){},275:function(e,t){},438:function(e,t){},503:function(e,t,n){},507:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n.n(a),i=n(234),r=n.n(i),l=n(510),o=n(34),u=n(35),c=n(57),m=n(56),h=n(58),d=n(74),p="https://s3.amazonaws.com/onename/avatar-placeholder.png",g=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return p}},newStatus:"",status:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"saveNewStatus",value:function(e){var t=this,n=this.props.userSession,a={text:e.trim(),created_at:Date.now()};n.putFile("status.json",JSON.stringify(a),{encrypt:!1}).then(function(){t.setState({newStatus:a.text})})}},{key:"fetchData",value:function(){var e=this;this.props.userSession.getFile("status.json",{decrypt:!1}).then(function(t){var n=JSON.parse(t||"[]");console.log(n),e.setState({status:n})}).finally(function(){console.log("read over")})}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(this.state.newStatus),this.setState({newStatus:""})}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSignOut,a=t.userSession,i=this.state.person;return console.log(i),a.isSignInPending()?null:s.a.createElement("div",{className:"panel-welcome",id:"section-2"},s.a.createElement("div",{className:"avatar-section"},s.a.createElement("img",{src:i.avatarUrl()?i.avatarUrl():p,className:"img-rounded avatar",id:"avatar-image",alt:""})),s.a.createElement("p",null,"Hello, ",s.a.createElement("span",{id:"heading-name"},i.name()?i.name():"Nameless Person"),"!"),s.a.createElement("p",{className:"lead"},s.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signout-button",onClick:n.bind(this)},"Logout")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("textarea",{className:"input-status",value:this.state.newStatus,onChange:function(t){return e.handleNewStatusChange(t)},placeholder:"\u8f93\u5165\u72b6\u6001"}),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:function(t){return e.handleNewStatusSubmit(t)}},"\u63d0\u4ea4"),s.a.createElement("p",null,"  status is: ",this.state.status.text))}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new d.Person(e.loadUserData().profile)})}}]),t}(a.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return s.a.createElement("div",{className:"panel-landing",id:"section-1"},s.a.createElement("h1",{className:"landing-heading"},"Hello, VisualNext!"),s.a.createElement("p",{className:"lead"},s.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signin-button",onClick:e.bind(this)},"Sign In with VisualNext")))}}]),t}(a.Component),f=new d.AppConfig(["store_write","publish_data"]),v=new d.UserSession({appConfig:f}),b=function(e){function t(){var e;return Object(o.a)(this,t),e=Object(c.a)(this,Object(m.a)(t).call(this)),console.log(f),console.log(v),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),v.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),v.signUserOut(window.location.origin)}},{key:"render",value:function(){return s.a.createElement("div",{className:"site-wrapper"},s.a.createElement("div",{className:"site-wrapper-inner"},v.isUserSignedIn()?s.a.createElement(g,{userSession:v,handleSignOut:this.handleSignOut}):s.a.createElement(S,{userSession:v,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;v.isSignInPending()&&v.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(a.Component);n(502),n(503);r.a.render(s.a.createElement(l.a,null,s.a.createElement(b,null)),document.getElementById("root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.598a9ba1.chunk.js.map