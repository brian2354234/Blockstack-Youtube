{"version":3,"sources":["Profile.js","Signin.js","App.js","index.js"],"names":["avatarFallbackImage","Profile","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","person","name","avatarUrl","newStatus","status","statusText","_this2","userSession","text","trim","created_at","Date","now","putFile","JSON","stringify","encrypt","then","setState","_this3","getFile","decrypt","file","parse","console","log","finally","event","target","value","saveNewStatus","_this4","_this$props","handleSignOut","isSignInPending","react_default","a","createElement","className","id","src","alt","onClick","bind","onChange","e","handleNewStatusChange","placeholder","handleNewStatusSubmit","fetchData","Person","loadUserData","profile","Component","Signin","handleSignIn","appConfig","AppConfig","UserSession","App","preventDefault","redirectToSignIn","signUserOut","window","location","origin","isUserSignedIn","Profile_Profile","Signin_Signin","handlePendingSignIn","userData","history","replaceState","document","title","ReactDOM","render","BrowserRouter","App_App","getElementById"],"mappings":"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","file":"static/js/main.598a9ba1.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Person,\n} from 'blockstack';\n\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\n\nexport default class Profile extends Component {\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n  \t  person: {\n  \t  \tname() {\n          return 'Anonymous';\n        },\n  \t  \tavatarUrl() {\n  \t  \t  return avatarFallbackImage;\n  \t  \t},\n  \t  },\n      newStatus:\"\",\n      status:\"\"\n  \t};\n  }\n  saveNewStatus(statusText) {\n     const { userSession } = this.props\n\n     let status = {\n       text: statusText.trim(),\n       created_at: Date.now()\n     }\n\n     const options = { encrypt: false }\n     userSession.putFile('status.json', JSON.stringify(status), options)\n       .then(() => {\n         this.setState({\n           newStatus: status.text\n         })\n       })\n  }\n  fetchData() {\n   const { userSession } = this.props\n   const options = { decrypt: false }\n   userSession.getFile('status.json', options)\n     .then((file) => {\n       var status = JSON.parse(file || '[]')\n       console.log(status)\n       this.setState({\n         status:status\n       })\n     })\n     .finally(() => {\n       console.log(\"read over\")\n     })\n  }\n  handleNewStatusChange(event) {\n    this.setState({newStatus: event.target.value})\n  }\n\n  handleNewStatusSubmit(event) {\n    this.saveNewStatus(this.state.newStatus)\n    this.setState({\n      newStatus: \"\"\n    })\n  }\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    console.log(person)\n    return (\n      !userSession.isSignInPending() ?\n      <div className=\"panel-welcome\" id=\"section-2\">\n        <div className=\"avatar-section\">\n          <img src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage } className=\"img-rounded avatar\" id=\"avatar-image\" alt=\"\"/>\n        </div>\n        <p>Hello, <span id=\"heading-name\">{ person.name() ? person.name() : 'Nameless Person' }</span>!</p>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signout-button\"\n            onClick={ handleSignOut.bind(this) }\n          >\n            Logout\n          </button>\n        </p>\n        <br/>\n        <br/>\n        <textarea className=\"input-status\"\n                 value={this.state.newStatus}\n                 onChange={e => this.handleNewStatusChange(e)}\n                 placeholder=\"输入状态\"\n               />\n        <br/>\n\n        <button\n                 className=\"btn btn-primary btn-lg\"\n                 onClick={e => this.handleNewStatusSubmit(e)}\n                >\n                提交\n        </button>\n        <p>  status is: {this.state.status.text}</p>\n\n      </div> : null\n    );\n  }\n  componentDidMount() {\n    this.fetchData()\n  }\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n    });\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Hello, VisualNext!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Sign In with VisualNext\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Profile from './Profile.js';\nimport Signin from './Signin.js';\nimport {\n  UserSession,\n  AppConfig\n} from 'blockstack';\n\nconst appConfig = new AppConfig(['store_write', 'publish_data'])\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n  constructor(){\n    super()\n    console.log(appConfig)\n    console.log(userSession)\n  }\n\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          { !userSession.isUserSignedIn() ?\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\n            : <Profile userSession={userSession} handleSignOut={ this.handleSignOut } />\n          }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}